<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content=noodp><meta name=author content=Rabbee><meta name=description content=兔子的咖啡馆><meta name=keywords content=兔子的咖啡馆><link rel=prev href=/2017/04/10/sweet-april/><link rel=next href=/2017/06/07/gdut-senate-manager-system/><link rel=canonical href=/2017/05/18/archlinux-install-note/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content=#da532c><meta name=theme-color content=#ffffff><title>ArchLinux安装笔记 | 兔子的咖啡馆</title><meta name=title content="ArchLinux安装笔记 | 兔子的咖啡馆"><link rel=stylesheet href=/font/iconfont.css><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":""},"articleSection":"posts","name":"ArchLinux安装笔记","headline":"ArchLinux安装笔记","description":"前段时间我发过一个Manjaro发行版的安装记录，这个ArchLinux就是它的爸爸啦。
除去它对新人非常不友好的安装过程，它还是一个很棒的发行版。它也是我现在长期使用的发行版。
这篇文文记录下自己的安装过程，毕竟以后可能很久都不会重装系统了，会忘记，逃)
欢迎没有使用过的朋友尝试尝试～
注意事项  桌面环境(DE)选择: Gnome.
 引导: Uefi.
 磁盘类型: GPT.
 若你电脑不是UEFI+GPT,请谨慎参考. 右转Arck Wiki
 系统安装过程请保持接线联网,DE安装完成前不使用Wifi.
  系统安装 获取镜像  官方源
 USTC源  参考Arck Wiki  Arck Wiki 以后你会有很多机会跟它打交道,好好收藏. Installation guide 安装指南. 安装过程中有什么不明白的可以查询. General recommendations 安装后的推荐. 系统安装完成后可以参考这里完善你的个人系统. List of applications 软件列表. 在这个软件分类里面你可以很轻松的找到想要的软件.  一. 动手安装 1. 把镜像刻录进U盘  Linux环境下可以在终端直接使用dd命令
sudo dd if=&quot;&quot; of=/dev/sd* bs=8M status=progress   Windows环境下推荐使用rufus工具,当然你也可以使用UltraISO
 2. 分区+格式化 我们使用fdisk这个工具 * 列出当前分区情况","inLanguage":"zh-cn","author":"Rabbee","creator":"Rabbee","publisher":"Rabbee","accountablePerson":"Rabbee","copyrightHolder":"Rabbee","copyrightYear":"2017","datePublished":"2017-05-18 18:26:55 &#43;0000 UTC","dateModified":"2017-05-18 18:26:55 &#43;0000 UTC","url":"/2017/05/18/archlinux-install-note/","wordCount":"493","keywords":["Arch","Linux","兔子的咖啡馆"]}</script></head><body><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href>兔子的咖啡馆</a></div><div class="menu navbar-right"><a class=menu-item href=/posts/>文章</a>
<a class=menu-item href=/categories/>目录</a>
<a class=menu-item href=/tags/>标签</a>
<a class=menu-item href=/about/>关于</a></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href>兔子的咖啡馆</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=/posts/>文章</a>
<a class=menu-item href=/categories/>目录</a>
<a class=menu-item href=/tags/>标签</a>
<a class=menu-item href=/about/>关于</a></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">ArchLinux安装笔记</h1><div class=post-meta>Written by <a itemprop=name href rel=author>Rabbee</a> with ♥
<span class=post-time>on <time datetime=2017-05-18 itemprop=datePublished>May 18, 2017</time></span>
in
<i class="iconfont icon-folder"></i><span class=post-category><a href=/categories/%E7%AC%94%E8%AE%B0/>笔记</a></span></div></header><div class=post-content><p>前段时间我发过一个Manjaro发行版的安装记录，这个ArchLinux就是它的爸爸啦。<br>除去它对新人非常不友好的安装过程，它还是一个很棒的发行版。它也是我现在长期使用的发行版。<br>这篇文文记录下自己的安装过程，毕竟以后可能很久都不会重装系统了，会忘记，逃)<br>欢迎没有使用过的朋友尝试尝试～</p><h2 id=注意事项>注意事项</h2><ul><li>桌面环境(DE)选择: Gnome.<br></li><li>引导: Uefi.<br></li><li>磁盘类型: GPT.<br></li><li>若你电脑不是UEFI+GPT,请谨慎参考. 右转<a href=https://wiki.archlinux.org/index.php/Main_page rel="nofollow noreferrer" target=_blank>Arck Wiki</a><br></li><li>系统安装过程请保持接线联网,DE安装完成前不使用Wifi.<br></li></ul><p><figure><img src=/images/ring.svg data-sizes=auto data-src=/images/archlinux-install-note/2017-05-18.png alt=img class=lazyload><figcaption class=image-caption>img</figcaption></figure></p><hr><h2 id=系统安装>系统安装</h2><h3 id=获取镜像>获取镜像</h3><ul><li><a href=https://www.archlinux.org/download/ rel="nofollow noreferrer" target=_blank>官方源</a><br></li><li><a href=http://mirrors.ustc.edu.cn/archlinux/iso/ rel="nofollow noreferrer" target=_blank>USTC源</a></li></ul><h3 id=参考arck-wiki>参考Arck Wiki</h3><ul><li><a href=https://wiki.archlinux.org/index.php/Main_page rel="nofollow noreferrer" target=_blank>Arck Wiki</a> 以后你会有很多机会跟它打交道,好好收藏.</li><li><a href=https://wiki.archlinux.org/index.php/Installation_guide rel="nofollow noreferrer" target=_blank>Installation guide</a> 安装指南. 安装过程中有什么不明白的可以查询.</li><li><a href=https://wiki.archlinux.org/index.php/General_recommendations rel="nofollow noreferrer" target=_blank>General recommendations</a> 安装后的推荐. 系统安装完成后可以参考这里完善你的个人系统.</li><li><a href=https://wiki.archlinux.org/index.php/List_of_applications rel="nofollow noreferrer" target=_blank>List of applications</a> 软件列表. 在这个软件分类里面你可以很轻松的找到想要的软件.</li></ul><h3 id=一-动手安装>一. 动手安装</h3><h4 id=1-把镜像刻录进u盘>1. 把镜像刻录进U盘</h4><ul><li><p>Linux环境下可以在终端直接使用dd命令</p><pre><code class=language-bash>sudo dd if=&quot;&quot; of=/dev/sd* bs=8M status=progress
</code></pre><blockquote><p>Windows环境下推荐使用<a href=https://rufus.akeo.ie/ rel="nofollow noreferrer" target=_blank>rufus</a>工具,当然你也可以使用UltraISO</p></blockquote><h4 id=2-分区-格式化>2. 分区+格式化</h4><p>我们使用<a href=https://wiki.archlinux.org/index.php/Fdisk rel="nofollow noreferrer" target=_blank>fdisk</a>这个工具
* 列出当前分区情况</p><pre><code class=language-bash>fdisk -l
</code></pre></li><li><p>给某分区格式化</p><pre><code class=language-bash>mkfs.ext4 /dev/sda1
</code></pre><ul><li>现在我们假设有以下分区</li></ul><table><thead><tr><th align=center>路径</th><th align=center>格式化类型</th></tr></thead><tbody><tr><td align=center>/dev/sda1</td><td align=center>fat32</td></tr><tr><td align=center>/dev/sda2</td><td align=center>btrfs</td></tr><tr><td align=center>/dev/sda3</td><td align=center>linux swap</td></tr><tr><td align=center>/dev/sda4</td><td align=center>xfs</td></tr></tbody></table><ul><li>挂载分区
<code>bash
mount /dev/sda4 /mnt</code></li></ul></li><li><p>挂载其他分区</p><pre><code class=language-bash>mkdir /mnt/boot
mount /dev/sda2 /mnt/boot
mkdir /mnt/boot/efi
mount /dev/sda1 /mnt/boot/efi
</code></pre><ul><li>激活交换分区
<code>bash
swapon /dev/sda3</code></li></ul></li></ul><h4 id=3-安装基本系统>3. 安装基本系统</h4><ul><li><p>选择镜像源</p><pre><code class=language-bash>vim /etc/pacman.d/mirrorlist
</code></pre><ul><li><p>vim界面下使用:/搜索,这里我们选择USTC的镜像源,在Vim打开mirrorlist后,输入以下</p><pre><code>:/ustc #回车
</code></pre></li><li><p>跳转到ustc一行,输入yy复制,回到mirrorlist文件最开始,p粘贴. 然后退出</p><pre><code>:wq
</code></pre></li><li><p>测试镜像源</p><pre><code class=language-bash>pacman -Sy
</code></pre></li></ul></li><li><p>速度应该还算不错,如果不好的话自己重新选择镜像源.</p></li><li><p>安装基本系统</p><pre><code class=language-bash>pacstrap /mnt base base-devel
</code></pre><h4 id=4-配置基本系统>4. 配置基本系统</h4><ul><li>生成<a href=https://wiki.archlinux.org/index.php/Fstab rel="nofollow noreferrer" target=_blank>Fstab</a>
<code>bash
genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</code></li></ul></li><li><p>使用Chroot进入安装后的系统</p><pre><code class=language-bash>arch-chroot /mnt
</code></pre><ul><li>设置时区,这里使用上海时区
<code>bash
ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</code></li></ul></li><li><p>使用hwclock生成/etc/adjtime</p><pre><code class=language-bash>hwclock --systohc
</code></pre><ul><li>Locale 使用vim<strong>编辑以下文件</strong>
<code>bash
/etc/locale.conf</code></li></ul></li><li><p>找到en_US.UTF-8把前面的#号去掉.</p></li><li><p>找到zh_CN.UTF-8把前面的#号去掉.</p></li><li><p>执行命令</p><pre><code class=language-bash>locale-gen
</code></pre><ul><li>Hostname 设置本地域名</li><li>把&rsquo;YourDomainName&rsquo;替换成你想修改的名字
<code>bash
echo 'YourDomainName' &gt;&gt; /etc/hostname</code></li></ul></li><li><p>在/etc/hosts添加如下所示:</p><pre><code>127.0.0.1	localhost.localdomain	localhost
::1		localhost.localdomain	localhost
127.0.1.1	'YourDomainName' .localdomain	'YourDomainName' 
</code></pre></li><li><p>网络设置<a href=https://wiki.archlinux.org/index.php/Network_configuration rel="nofollow noreferrer" target=_blank>Network configuration</a></p></li></ul><blockquote><p>这个暂时略过</p></blockquote><ul><li><p>设置root密码</p><pre><code class=language-bash>passwd
</code></pre><h4 id=5-安装引导程序-grub-https-wiki-archlinux-org-index-php-grub>5. 安装引导程序<a href=https://wiki.archlinux.org/index.php/GRUB rel="nofollow noreferrer" target=_blank>Grub</a></h4><ul><li>安装grub和efibootmgr
<code>bash
pacman -S grub efibootmgr</code></li></ul></li><li><p>安装可选包</p><pre><code class=language-bash>pacman -S os-prober intel-ucode
</code></pre><ul><li>使用UEFI模式安装grub
<code>bash
grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=grub</code></li></ul></li><li><p>生成grub的配置文件</p><pre><code class=language-bash>grub-mkconfig -o /boot/grub/grub.cfg
grub-mkconfig -o /boot/efi/EFI/grub/grub.cfg
</code></pre><h4 id=6-重启系统>6. 重启系统</h4><ul><li>退出chroot
<code>bash
exit</code></li></ul></li><li><p>卸载分区</p><pre><code class=language-bash>umount -R /mnt
</code></pre><ul><li>重启
<code>bash
reboot</code></li></ul></li></ul><h3 id=二-配置系统-general-recommendations-https-wiki-archlinux-org-index-php-general-recommendations-users-and-groups>二. 配置系统 <a href=https://wiki.archlinux.org/index.php/General_recommendations#Users_and_groups rel="nofollow noreferrer" target=_blank>General recommendations</a></h3><ul><li>重启完后以root用户进入系统</li></ul><h4 id=1-配置普通用户>1. 配置普通用户</h4><ul><li><p>新增用户 &lsquo;YourName&rsquo;替换为你的用户名</p><pre><code class=language-bash>useradd -m -g users -G wheel -s /bin/bash 'YourName'
</code></pre><ul><li>为新增用户设置密码
<code>bash
passwd 'YourName'</code></li></ul></li><li><p>让你的用户可以使用sudo提升权限</p><pre><code class=language-bash>chmod +w /etc/sudoers
</code></pre><ul><li><p>在/etc/sudoers找到</p><pre><code>root    ALL=(ALL)   ALL
</code></pre></li><li><p>添加一行</p><pre><code>root    ALL=(ALL)   ALL
'YourName'  ALL=(ALL)   ALL
</code></pre></li><li><p>保存退出</p></li></ul><h4 id=2-联网>2. 联网</h4><ul><li>使用DHCP获取ip地址
<code>bash
dhcpcd</code></li></ul></li><li><p>使用ip查看当前ip</p><pre><code class=language-bash>ip addr
</code></pre><ul><li>使用ping查看联网情况
<code>bash
ping -c 114.114.114.114</code></li></ul></li></ul><h3 id=三-安装桌面环境>三. 安装桌面环境</h3><h4 id=1-安装-xorg-https-wiki-archlinux-org-index-php-xorg-与-wayland-https-wiki-archlinux-org-index-php-wayland>1. 安装<a href=https://wiki.archlinux.org/index.php/Xorg rel="nofollow noreferrer" target=_blank>xorg</a> 与 <a href=https://wiki.archlinux.org/index.php/Wayland rel="nofollow noreferrer" target=_blank>wayland</a></h4><ul><li><p>安装xorg,期间选择好自己需要的驱动</p><pre><code class=language-bash>pacman -S xorg
</code></pre><ul><li>安装gnome桌面环境和<a href=https://wiki.archlinux.org/index.php/GDM rel="nofollow noreferrer" target=_blank>GDM显示管理器</a>
<code>bash
pacman -S gnome</code></li></ul></li><li><p>设置GDM服务开机启动</p><pre><code class=language-bash>systemctl enable gdm
</code></pre><ul><li>设置网络管理器开机启动
<code>bash
systemctl enable NetworkManager.service</code></li></ul></li><li><p>重启系统即可进入gnome</p><pre><code class=language-bash>reboot
</code></pre><h3 id=四-无线网卡设置-wireless-network-configuration-https-wiki-archlinux-org-index-php-wireless-network-configuration>四. 无线网卡设置 <a href=https://wiki.archlinux.org/index.php/Wireless_network_configuration rel="nofollow noreferrer" target=_blank>Wireless network configuration</a></h3><h4 id=1-查看电脑网卡>1. 查看电脑网卡</h4><ul><li><p>检查已加载的硬件</p><pre><code class=language-bash>lspci -k
</code></pre><pre><code>03:00.0 Network controller: Broadcom Limited BCM43142 802.11b/g/n (rev 01)
	Subsystem: Lite-On Communications Inc Device 6675
	Flags: bus master, fast devsel, latency 0, IRQ 19
	Memory at f7800000 (64-bit, non-prefetchable) [size=32K]
	Capabilities: &lt;access denied&gt;
	Kernel driver in use: wl
	Kernel modules: wl
</code></pre></li></ul></li><li><p>可见我的网卡是<a href=https://wiki.archlinux.org/index.php/Broadcom_wireless rel="nofollow noreferrer" target=_blank>BCM43142</a>，安装相应软件。</p><pre><code class=language-bash>sudo pacman -S linux-headers broadcom-wl-dkms
</code></pre><ul><li>重启电脑，Wifi成功启动。</li></ul><hr><h2 id=附加设置>附加设置</h2><h3 id=使用-aur-arch-user-repository-https-wiki-archlinux-org-index-php-arch-user-repository>使用<a href=https://wiki.archlinux.org/index.php/Arch_User_Repository rel="nofollow noreferrer" target=_blank>AUR(Arch User Repository)</a></h3><h4 id=1-设置aur>1. 设置AUR</h4><ul><li>编辑pacman.conf
<code>bash
sudo vim /etc/pacman.conf</code></li></ul></li><li><p>在最后一行添加</p><pre><code># Archlinuxcn USTC
[archlinuxcn]
Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch
</code></pre></li><li><p>更新源</p><pre><code class=language-bash>sudo pacman -Sy
</code></pre><ul><li>安装keyring
<code>bash
sudo pacman -S archlinuxcn-keyring</code></li></ul></li><li><p>安装yaourt</p><pre><code class=language-bash>sudo pacman -S yaourt
</code></pre><h4 id=2-使用yaourt安装aur里的软件>2. 使用yaourt安装AUR里的软件</h4><blockquote><p>注意: yaourt不需要root权限.</p></blockquote><ul><li>安装gnome拓展
<code>bash
yaourt -S chrome-gnome-shell-git</code></li></ul></li><li><p>显示以下信息,关于编辑的一律选择n</p><pre><code>chrome-gnome-shell-git 9.r0.g35851c7-1  (2017-04-18 13:15)
（Unsupported 中的包：潜在危险）
==&gt; 编辑 PKGBUILD ？ [Y/n] (&quot;A&quot; 忽略)
==&gt; ----------------------------
==&gt; 
</code></pre></li><li><p>直到遇到构建,选择y</p><pre><code>==&gt; 继续构建 chrome-gnome-shell-git ？[Y/n]
==&gt; ----------------------------------
==&gt; 
</code></pre></li></ul><hr><h2 id=常用软件>常用软件</h2><h3 id=代理软件>代理软件</h3><ul><li><p>Shadowsocks</p><pre><code class=language-bash>yaourt -S shadowsocks-qt5
</code></pre><h3 id=中文输入法>中文输入法</h3><ul><li>框架
<code>bash
sudo pacman -S fcitx fcitx-im fcitx-configtool</code></li></ul></li><li><p>搜狗拼音</p><pre><code class=language-bash>yaourt -S fcitx-sogoupinyin
</code></pre><ul><li>配置fcitx</li><li>Xorg环境中,修改~/.xprofile</li><li><p>Wayland环境中,修改/etc/environment<br>在文件末尾添加如下文本.</p><pre><code>export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
export XMODIFIERS=@im=fcitx
</code></pre><p>保存退出，注销Gnome，重新登录后即可使用。</p></li></ul><h3 id=gnome-常用软件>Gnome 常用软件</h3><h4 id=gui软件>GUI软件</h4><ul><li>arch源(pacman -S):</li><li>日志查看器 gnome-logs</li><li>文本编辑器 gedit</li><li>Gnome高级设置 gnome-tweak-tools</li><li>下载器 uget</li><li>浏览器 firefox(firefox-i18n-zh-cn) chromium</li><li>IRC客户端 polari</li><li>FTP客户端 filezilla</li><li>图像编辑处理 gimp</li><li>视频播放器 mpv vlc</li><li>邮件客户端 thunderbird(thunderbird-i18n-zh-cn)</li><li>AUR源(yaourt -S):</li><li>浏览器 google-chrome</li></ul><hr><h3 id=gnome-拓展-https-extensions-gnome-org-extension><a href=https://extensions.gnome.org/extension rel="nofollow noreferrer" target=_blank>Gnome 拓展</a></h3><ul><li>安装拓展必备软件
<code>bash
yaourt -S chrome-gnome-shell-git</code></li></ul></li><li><p><a href=https://extensions.gnome.org/extension/307/dash-to-dock/ rel="nofollow noreferrer" target=_blank>Dash to Dock</a> 好用的Dock</p></li><li><p><a href=https://extensions.gnome.org/extension/750/openweather/ rel="nofollow noreferrer" target=_blank>OpenWeather</a> 天气</p></li><li><p><a href=https://extensions.gnome.org/extension/1011/dynamic-panel-transparency/ rel="nofollow noreferrer" target=_blank>Dynamic Panel Transparency</a> 顶栏透明</p></li><li><p><a href=https://extensions.gnome.org/extension/545/hide-top-bar/ rel="nofollow noreferrer" target=_blank>Hide Top Bar</a> 隐藏顶栏</p></li></ul><h3 id=代码编辑器>代码编辑器</h3><ul><li>Vscode
<code>bash
yaourt -S visual-studio-code</code></li></ul></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>Rabbee</span></p><p class=copyright-item><span>Link:</span>
<a href=/2017/05/18/archlinux-install-note/>/2017/05/18/archlinux-install-note/</span></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=tags/arch/>#Arch</a></span>
<span class=tag><a href=tags/linux/>#Linux</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href>home</a></span></section></div><div class=post-nav><a href=/2017/04/10/sweet-april/ class=prev rel=prev title=四月甜><i class="iconfont icon-left"></i>&nbsp;四月甜</a>
<a href=/2017/06/07/gdut-senate-manager-system/ class=next rel=next title=广工教务系统助手>广工教务系统助手&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment><div id=disqus_thread></div><script type=text/javascript>var d=document,s=d.createElement('script');s.src='//'+'crabbit'+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2017 - 2020</span>
<span class=with-love><i class="iconfont icon-love"></i></span><span class=author itemprop=copyrightHolder><a href>Rabbee</a> |</span>
<a href=http://www.beian.miit.gov.cn/ target=_blank rel="external nofollow">粤ICP备20004985号</a> |
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/liuzc/leaveit target=_blank rel="external nofollow">LeaveIt</a></span></div></footer><link href=//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css rel=stylesheet><script src=/js/vendor_gallery.min.js async></script></div></body></html>